<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <!--<meta name="viewport" content="width=device-width, initial-scale=1">-->
    <meta content="width=device-width,initial-scale=1.0,maximum-scale=1.0,user-scalable=no" id="viewport" name="viewport">
    <title>Only One</title>
    <link href="http://cdn.bootcss.com/bootstrap/3.3.0/css/bootstrap.min.css" rel="stylesheet">
    <link href="css/bootstrap.min.css" rel="stylesheet" type="text/css">
    <!--<link rel="stylesheet" href="http://cdn.static.runoob.com/libs/bootstrap/3.3.7/css/bootstrap.min.css">-->
    <link href="css/style2.css" rel="stylesheet" type="text/css">
</head>
<body style="overflow:scroll;overflow-y: auto">
<!--<div class="side-nav" role="navigation">-->
    <!--<ul class="nav-side-nav">-->
        <!--<li><a class="tooltip-side-nav" href="#onepage" ></a></li>-->
        <!--<li><a class="tooltip-side-nav" href="#twopage" ></a></li>-->
        <!--<li><a class="tooltip-side-nav" href="#threepage" ></a></li>-->
        <!--<li><a class="tooltip-side-nav" href="#fourpage" ></a></li>-->
        <!--<li><a class="tooltip-side-nav" href="#fivepages" ></a></li>-->
    <!--</ul>-->

<!--</div>-->
<div class="onepage" id="onepage">
    <div class="onepage-bg" id="onepagebg"></div>
    <div class="container">
        <div class="row">
            <div class="title_text">
                <div class="col-md-12 headfontsize">
                    <h1 class="headh1content">
                        Only One<br>
                        您的<br>贴身优惠卡管家</h1>
                    <p>出门再也不用厚厚的钱包,只需要一部手机,一个二维码。。。</p>
                    <p class="btn-app-store">
                        <a class="btn btn-success btn-lg btnToRegeist" data-toggle="modal" data-target="#myModal" href="#myModal">立即注册,体验OO</a><br>

                        <a class="btn btn-primary btn-lg" id="btnToLogin" data-toggle="modal" data-target="#myModal2" href="#myModal2">已有账号?立即登入吧</a>

                    </p>

                </div>
            </div>
        </div>
    </div>
</div>

</div>
<div class="twopage" id="twopage">
    <div class="twopage-text">
        <h1 class="twopage-text-h1">
            目前支持的方式 <img style="width: 50px;height: 50px" src="images/smile.jpeg">
        </h1>

    </div>
    <div class="row">
        <div class=" twopage-courses col-md-4 col-sm-4 col-xs-4">
            <a href="#"><img src="images/wechat.jpg" style="width: 100%">
                <div class="classicon">
                    <h3>点击显示二维码</h3>
                    <h1><strong>关注公众号,方便使用哦~</strong></h1>
                </div>
            </a>
        </div>
        <div class=" twopage-courses col-md-4 col-sm-4 col-xs-4">
            <a href="#"><img src="images/ios.jpg" style="width: 100%">
                <div class="classicon">
                    <h3>暂未开放</h3>
                    <h1><strong>程序员正在努力。。。</strong></h1>
                </div>
            </a>
        </div>
        <div class=" twopage-courses col-md-4 col-sm-4 col-xs-4">
            <a href="#"><img src="images/android.jpg" style="width: 100%">
                <div class="classicon">
                    <h3>暂未开放</h3>
                    <h1><strong>程序员正在努力。。。</strong></h1>
                </div>
            </a>
        </div>


    </div>



</div>

<div class="threepage" id="threepage">
    <div class="threepage-bg" id="threepagebg">
        <div class="threepagecontent">
            <div class="threepagetext">
                <h1>
                    为什么要使用Only One?
                </h1>
                <p>
                    卡太多?赶紧扔掉?在Only One 上注册一个二维码,从此出门购物不用再带卡哦~

                </p>

            </div>

            <a class="btn btn-success btn-lg threebtncontent btnToRegeist" data-toggle="modal" data-target="#myModal" href="#myModal">立即注册</a><br>
        </div>
    </div>

</div>
<div class="fourpage" id="fourpage">
    <div class="container fourpage-container" >
        <div class="coursexingging-text">
            <h1>最新支持Only One的商家</h1>
            <p>还在等什么?赶紧加入Only Only One吧</p>

        </div>

    <div id="carousel-example-generic" class="carousel slide" data-ride="carousel" >
        <!-- Indicators -->
        <ol class="carousel-indicators" >
            <li data-target="#carousel-example-generic" data-slide-to="0" class="active"></li>
            <li data-target="#carousel-example-generic" data-slide-to="1"></li>
            <li data-target="#carousel-example-generic" data-slide-to="2"></li>
        </ol>

        <!-- Wrapper for slides -->
        <div class="carousel-inner" role="listbox" >
            <div class="item active">
                <img src="./images/logos/nike.jpg" alt="..." style="width: 100%">
                <div class="carousel-caption">

                </div>
            </div>
            <div class="item">
                <img src="./images/logos/adidas.jpg" alt="...">
                <div class="carousel-caption">

                </div>
            </div>
            <div class="item">
                <img src="./images/logos/jackjones.jpg" alt="...">
                <div class="carousel-caption">

                </div>
            </div>

        </div>

        <!-- Controls -->
        <a class="left carousel-control" href="#carousel-example-generic" role="button" data-slide="prev">
            <span class="glyphicon glyphicon-chevron-left"></span>
            <span class="sr-only">Previous</span>
        </a>
        <a class="right carousel-control" href="#carousel-example-generic" role="button" data-slide="next">
            <span class="glyphicon glyphicon-chevron-right"></span>
            <span class="sr-only">Next</span>
        </a>
    </div>

    </div>

</div>

<div class="fivepage" id="fivepages">
    <div class="fivepage-bg" id="fivepage">
        <div class="container">
            <div class="footertext" style="width: auto;height: auto;text-align: center">
                <h1>Copy Right@OnlyOne</h1>

            </div>



        </div>



    </div>



</div>
<!-- model-->
<div class="modal fade  bs-example-modal-sm" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-sm">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                <h4 class="modal-title" id="myModalLabel">通过手机号快速注册:</h4>
            </div>
            <div class="modal-body">
                <form role="form" >
                    <div class="form-group">
                        <label for="phoneNumber">手机号:&nbsp;&nbsp;</label>
                        <input style="" type="tel" class="form-control" id="phoneNumber" required oninvalid="setCustomValidity('请填写手机号');" oninput="setCustomValidity('');" placeholder="Enter Your Phone:" onkeyup="this.value=this.value.replace(/\D/g,'')" onafterpaste="this.value=this.value.replace(/\D/g,'')">
                        <button style="width: 100%" type="button" class="btn btn-primary right">发送验证码</button>
                    </div>
                    <div class="form-group">
                        <label for="qrcode">验证码:&nbsp;&nbsp;&nbsp;&nbsp;</label>
                        <input style="width: auto; display: inline" type="text" class="form-control"required oninvalid="setCustomValidity('请填写验证码');" oninput="setCustomValidity('');" id="qrcode" placeholder="输入短信验证码">
                    </div>
                    <div class="form-group">
                        <label for="exampleInputPassword1">输入密码:</label>
                        <input style="width: auto; display: inline" type="password" class="form-control" required oninvalid="setCustomValidity('请填写新密码');" oninput="setCustomValidity('');" id="exampleInputPassword1" placeholder="输入密码">
                    </div>
                    <div class="form-group">
                        <label for="exampleInputPassword1">真实姓名:</label>
                        <input style="width: auto; display: inline" type="text" class="form-control" required oninvalid="setCustomValidity('请填写姓名');" oninput="setCustomValidity('');" id="realName" placeholder="真实姓名">
                    </div>
                    <div class="form-group">
                        <label for="exampleInputPassword1">身份证:&nbsp;&nbsp;&nbsp;</label>
                        <input style="width: auto; display: inline" type="text" class="form-control" required oninvalid="setCustomValidity('请填写身份证');" oninput="setCustomValidity('');" id="IDCard" placeholder="公民身份证" onkeyup="this.value=this.value.replace(/\D/g,'')" onafterpaste="this.value=this.value.replace(/\D/g,'')">
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-default " data-dismiss="modal">Close</button>
                        <button type="button" class="btn btn-primary" id="toRegeist">注册</button>
                    </div>

                </form>
            </div>

        </div>
    </div>
</div>
<div class="modal fade fade bs-example-modal-sm" id="myModal2" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-sm">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                <h4 class="modal-title" id="myModalLabel2">通过手机号快速登入:</h4>
            </div>
            <div class="modal-body">
                <form role="form" >
                    <div class="form-group">
                        <label for="phoneNumber2" >手机号:&nbsp;&nbsp;</label>
                        <input style="" type="tel" class="form-control" id="phoneNumber2"   required oninvalid="setCustomValidity('请填写手机号');" oninput="setCustomValidity('');" placeholder="Enter Your Phone:">

                    </div>

                    <div class="form-group">
                        <label for="exampleInputPassword2">登入密码:&nbsp;&nbsp;</label>
                        <input style="" type="password" class="form-control" required oninvalid="setCustomValidity('请填写登入密码');" oninput="setCustomValidity('');" id="exampleInputPassword2" placeholder="Password">
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-default " data-dismiss="modal">Close</button>
                        <button type="button" class="btn btn-primary" id="toLogin">登入</button>
                    </div>
                </form>
            </div>

        </div>
    </div>
</div>
<script src="js/jquery-3.1.0.min.js"></script>
<script src="js/jquery.cookie.js"></script>
<script src="js/bootstrap.min.js"></script>
<script>
    var ip_address = "localhost";
    $(document).ready(function () {
        $("#btnToLogin").on("click",function () {
            var ass = $.cookie("login");
            if(ass){
            if( ass.length==24) {
                location.href = 'main.html';
                return;
            }}
        });
        $(window).scroll(function() {
            console.info($(window).scrollTop());
        });

    });



    $("#toLogin").on("click",function () {


        $.ajax({
            //提交数据的类型 POST GET
            type: "POST",
            //提交的网址
            url: "http://"+ip_address+":8888/login",
            //提交的数据
            data: {phone: $("#phoneNumber2").val(), password: $("#exampleInputPassword2").val()},
            //返回数据的格式
            dataType: "text",//"xml", "html", "script", "json", "jsonp", "text".
            //在请求之前调用的函数
            //成功返回之后调用的函数
            success: function (data) {
                var name  = $("#phoneNumber2").val();
                var pwd = $("#exampleInputPassword2").val()
                data = JSON.parse(data);
               //     alert(name +pwd);
                if(data == null){
                        alert("账号不存在或者密码错误!");

                }
                if(data.phone==name&& data.passWord==pwd)
                {
                    saveCookie(data._id);
                   alert(data._id);
             location.href="main.html?id="+data._id;
                   // alert($.cookie("login"));
                }
                else{
                    alert("账号不存在或者密码错误!");
                }
            }
        });
    });

    $("#toRegeist").on("click",function () {
       // alert("!!!");
        if($("#phoneNumber").val().trim()!="" && $("#exampleInputPassword1").val().trim()!="" && $("#realName").val().trim()!=""&&$("#IDCard").val().trim()!="") {
            $.ajax({
                type: "POST",
                url: "http://"+ip_address+":8888/regeist",
                data: {
                    phone: $("#phoneNumber").val(),
                    passWord: $("#exampleInputPassword1").val(),
                    realName: $("#realName").val(),
                    IDCard: $("#IDCard").val()
                },
                cache:false,
                dataType: "text",
                success: function (data) {
                    alert("注册成功");
                    data = JSON.parse(data)._id;
                    saveCookie(data);
                    console.log(data+"注册成功");
                    location.href="main.html?id="+data;
                    },
                error:function (e) {
                   console.log(e );
                }
            })
        }
    });
    function saveCookie(string){
        $.cookie("login",string,{
            expires:7,//有效日期


            // domanin:   "", //cookie的域名
            //secure:true //true,cookie的传输会要求一个安全协议,否则反之
    });
    }
</script>
</body>
</html>